# Docker Hub è‡ªåŠ¨æ„å»ºé…ç½®æŒ‡å—

## æ¦‚è¿°

ä¸ºäº†è®©GitHub Actionsè‡ªåŠ¨æ„å»ºå¹¶æ¨é€Dockeré•œåƒåˆ°Docker Hubï¼Œéœ€è¦é…ç½®ç›¸åº”çš„è®¤è¯å‡­æ®ã€‚

## ğŸ”§ é…ç½®æ­¥éª¤

### 1. åˆ›å»ºDocker Hubè®¿é—®ä»¤ç‰Œ

1. **ç™»å½•Docker Hub**
   - è®¿é—®ï¼šhttps://hub.docker.com/
   - ä½¿ç”¨æ‚¨çš„è´¦å·ç™»å½•

2. **è¿›å…¥å®‰å…¨è®¾ç½®**
   - è®¿é—®ï¼šhttps://hub.docker.com/settings/security
   - æˆ–ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ Account Settings â†’ Security

3. **åˆ›å»ºæ–°çš„è®¿é—®ä»¤ç‰Œ**
   - ç‚¹å‡» "New Access Token" æŒ‰é’®
   - å¡«å†™ä»¤ç‰Œä¿¡æ¯ï¼š
     - **Token description**: `github-actions-shortlink`
     - **Access permissions**: `Read, Write, Delete`
   - ç‚¹å‡» "Generate" ç”Ÿæˆä»¤ç‰Œ

4. **ä¿å­˜è®¿é—®ä»¤ç‰Œ**
   - âš ï¸ **é‡è¦**: å¤åˆ¶ç”Ÿæˆçš„ä»¤ç‰Œå¹¶å¦¥å–„ä¿å­˜
   - ä»¤ç‰Œåªä¼šæ˜¾ç¤ºä¸€æ¬¡ï¼Œå…³é—­é¡µé¢åæ— æ³•å†æ¬¡æŸ¥çœ‹

### 2. é…ç½®GitHub Secrets

1. **è¿›å…¥GitHubä»“åº“è®¾ç½®**
   - è®¿é—®ï¼šhttps://github.com/nodesire7/short_url/settings/secrets/actions
   - æˆ–åœ¨ä»“åº“é¡µé¢ç‚¹å‡» Settings â†’ Secrets and variables â†’ Actions

2. **æ·»åŠ Repository secrets**
   
   ç‚¹å‡» "New repository secret" æ·»åŠ ä»¥ä¸‹ä¸¤ä¸ªå¯†é’¥ï¼š

   **ç¬¬ä¸€ä¸ªå¯†é’¥ï¼š**
   - **Name**: `DOCKER_USERNAME`
   - **Secret**: `nodesire7` (æ‚¨çš„Docker Hubç”¨æˆ·å)

   **ç¬¬äºŒä¸ªå¯†é’¥ï¼š**
   - **Name**: `DOCKER_PASSWORD`
   - **Secret**: ç²˜è´´æ­¥éª¤1ä¸­ç”Ÿæˆçš„è®¿é—®ä»¤ç‰Œ

3. **éªŒè¯é…ç½®**
   - ç¡®ä¿ä¸¤ä¸ªå¯†é’¥éƒ½å·²æ­£ç¡®æ·»åŠ 
   - å¯†é’¥åç§°å¿…é¡»å®Œå…¨åŒ¹é…ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰

### 3. è§¦å‘è‡ªåŠ¨æ„å»º

é…ç½®å®Œæˆåï¼Œä»¥ä¸‹æ“ä½œä¼šè§¦å‘è‡ªåŠ¨æ„å»ºï¼š

1. **æ¨é€ä»£ç åˆ°mainåˆ†æ”¯**
   ```bash
   git push origin main
   ```

2. **åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾**
   ```bash
   git tag v1.0.0
   git push origin v1.0.0
   ```

3. **æ‰‹åŠ¨è§¦å‘**
   - åœ¨GitHubä»“åº“é¡µé¢è¿›å…¥ Actions æ ‡ç­¾
   - é€‰æ‹© "Build and Push Docker Images" å·¥ä½œæµ
   - ç‚¹å‡» "Run workflow"

## ğŸ“Š æ„å»ºçŠ¶æ€æ£€æŸ¥

### æŸ¥çœ‹æ„å»ºè¿›åº¦

1. **è¿›å…¥Actionsé¡µé¢**
   - è®¿é—®ï¼šhttps://github.com/nodesire7/short_url/actions

2. **æŸ¥çœ‹å·¥ä½œæµçŠ¶æ€**
   - ç»¿è‰²âœ…ï¼šæ„å»ºæˆåŠŸ
   - çº¢è‰²âŒï¼šæ„å»ºå¤±è´¥
   - é»„è‰²ğŸŸ¡ï¼šæ„å»ºè¿›è¡Œä¸­

3. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**
   - ç‚¹å‡»å…·ä½“çš„å·¥ä½œæµè¿è¡Œ
   - å±•å¼€å„ä¸ªæ­¥éª¤æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### éªŒè¯é•œåƒæ¨é€

æ„å»ºæˆåŠŸåï¼Œå¯ä»¥éªŒè¯é•œåƒæ˜¯å¦å·²æ¨é€ï¼š

1. **æ£€æŸ¥Docker Hub**
   - è®¿é—®ï¼šhttps://hub.docker.com/u/nodesire7
   - æŸ¥çœ‹æ˜¯å¦æœ‰ä»¥ä¸‹ä»“åº“ï¼š
     - `nodesire7/shortlink-backend`
     - `nodesire7/shortlink-frontend`

2. **æ‹‰å–é•œåƒæµ‹è¯•**
   ```bash
   docker pull nodesire7/shortlink-backend:latest
   docker pull nodesire7/shortlink-frontend:latest
   ```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é”™è¯¯

#### 1. è®¤è¯å¤±è´¥
```
ERROR: failed to push: push access denied, repository does not exist or may require authorization
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥Docker Hubç”¨æˆ·åæ˜¯å¦æ­£ç¡®
- ç¡®è®¤è®¿é—®ä»¤ç‰Œæƒé™åŒ…å« Write
- éªŒè¯GitHub Secretsé…ç½®æ˜¯å¦æ­£ç¡®

#### 2. ä»“åº“ä¸å­˜åœ¨
```
ERROR: repository does not exist
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- åœ¨Docker Hubä¸Šæ‰‹åŠ¨åˆ›å»ºä»“åº“ï¼š
  - `nodesire7/shortlink-backend`
  - `nodesire7/shortlink-frontend`
- æˆ–è€…è®©Docker Hubè‡ªåŠ¨åˆ›å»ºï¼ˆé¦–æ¬¡æ¨é€æ—¶ï¼‰

#### 3. ä»¤ç‰Œè¿‡æœŸ
```
ERROR: authorization failed
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- é‡æ–°ç”ŸæˆDocker Hubè®¿é—®ä»¤ç‰Œ
- æ›´æ–°GitHub Secretsä¸­çš„ `DOCKER_PASSWORD`

### è°ƒè¯•æ­¥éª¤

1. **æ£€æŸ¥Secretsé…ç½®**
   - ç¡®è®¤å¯†é’¥åç§°æ­£ç¡®
   - ç¡®è®¤å¯†é’¥å€¼æ²¡æœ‰å¤šä½™çš„ç©ºæ ¼

2. **æŸ¥çœ‹æ„å»ºæ—¥å¿—**
   - åœ¨GitHub Actionsä¸­æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
   - é‡ç‚¹å…³æ³¨ "Log in to Docker Hub" æ­¥éª¤

3. **æ‰‹åŠ¨æµ‹è¯•**
   ```bash
   # æœ¬åœ°æµ‹è¯•Docker Hubç™»å½•
   echo "YOUR_TOKEN" | docker login -u nodesire7 --password-stdin
   ```

## ğŸ¯ æœ€ä½³å®è·µ

### å®‰å…¨å»ºè®®

1. **ä½¿ç”¨è®¿é—®ä»¤ç‰Œè€Œéå¯†ç **
   - è®¿é—®ä»¤ç‰Œå¯ä»¥é™åˆ¶æƒé™èŒƒå›´
   - å¯ä»¥éšæ—¶æ’¤é”€è€Œä¸å½±å“å…¶ä»–åº”ç”¨

2. **å®šæœŸè½®æ¢ä»¤ç‰Œ**
   - å»ºè®®æ¯6ä¸ªæœˆæ›´æ¢ä¸€æ¬¡è®¿é—®ä»¤ç‰Œ
   - åŠæ—¶æ’¤é”€ä¸å†ä½¿ç”¨çš„ä»¤ç‰Œ

3. **æœ€å°æƒé™åŸåˆ™**
   - åªæˆäºˆå¿…è¦çš„æƒé™ï¼ˆRead, Writeï¼‰
   - é¿å…ä½¿ç”¨ Admin æƒé™

### æ€§èƒ½ä¼˜åŒ–

1. **ä½¿ç”¨æ„å»ºç¼“å­˜**
   - GitHub Actionså·²é…ç½®ç¼“å­˜åŠ é€Ÿæ„å»º
   - é¿å…é¢‘ç¹çš„å®Œæ•´é‡å»º

2. **å¤šæ¶æ„æ„å»º**
   - æ”¯æŒ AMD64 å’Œ ARM64 æ¶æ„
   - æé«˜é•œåƒå…¼å®¹æ€§

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥GitHub Actionsçš„æ„å»ºæ—¥å¿—
3. å‚è€ƒDocker Hubå®˜æ–¹æ–‡æ¡£
4. åœ¨GitHubä»“åº“ä¸­æäº¤Issue

---

**é…ç½®å®Œæˆåï¼Œæ‚¨çš„çŸ­é“¾æ¥ç³»ç»Ÿå°†å…·å¤‡å®Œå…¨è‡ªåŠ¨åŒ–çš„Dockeré•œåƒæ„å»ºå’Œå‘å¸ƒèƒ½åŠ›ï¼** ğŸ‰
